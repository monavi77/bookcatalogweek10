{"ast":null,"code":"var _jsxFileName = \"/Users/vikamonakova/Desktop/booklabweek10/bookcatalogweek10/src/components/Book.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport \"./Book.css\";\n\n// Direct API URL\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_BASE = \"https://api.itbook.store/1.0\";\nexport default function Book({\n  id,\n  title,\n  price,\n  image,\n  url,\n  selected,\n  onSelect = () => {},\n  isLoaned\n}) {\n  _s();\n  const [showDetails, setShowDetails] = useState(false);\n  const [bookDetails, setBookDetails] = useState(null);\n  const [similarBooks, setSimilarBooks] = useState([]);\n  const [loadingDetails, setLoadingDetails] = useState(false);\n  const [loadingSimilar, setLoadingSimilar] = useState(false);\n  const [errorDetails, setErrorDetails] = useState(\"\");\n  const [errorSimilar, setErrorSimilar] = useState(\"\");\n  const mountedRef = useRef(true);\n  useEffect(() => {\n    mountedRef.current = true;\n    return () => {\n      mountedRef.current = false;\n    };\n  }, []);\n  useEffect(() => {\n    if (!showDetails || !id) return;\n    const detailsController = new AbortController();\n    const similarController = new AbortController();\n    async function fetchDetailsAndSimilar() {\n      let isDetailsPhase = true;\n      try {\n        var _detailsData$authors;\n        setErrorDetails(\"\");\n        setErrorSimilar(\"\");\n        setLoadingDetails(true);\n\n        // 1) Book details by ISBN-13\n        const detailsRes = await fetch(`${API_BASE}/books/${id}`, {\n          signal: detailsController.signal\n        });\n        const detailsData = await detailsRes.json();\n        if (!mountedRef.current) return;\n        if (detailsData.error && detailsData.error !== \"0\") {\n          throw new Error(detailsData.error === \"1\" ? \"Book not found.\" : \"Unknown API error.\");\n        }\n        setBookDetails(detailsData);\n        setLoadingDetails(false);\n        isDetailsPhase = false;\n\n        // 2) Similar books by author's last name (fallback: by title)\n        setLoadingSimilar(true);\n        let query;\n        if ((_detailsData$authors = detailsData.authors) !== null && _detailsData$authors !== void 0 && _detailsData$authors.trim()) {\n          // Extract last name from authors field\n          // Handle multiple authors by taking the first one\n          const firstAuthor = detailsData.authors.split(',')[0].trim();\n          // Split by spaces and take the last word as the last name\n          const nameParts = firstAuthor.split(/\\s+/);\n          const lastName = nameParts.length > 0 ? nameParts[nameParts.length - 1] : firstAuthor;\n          query = encodeURIComponent(lastName);\n        } else {\n          query = encodeURIComponent(detailsData.title || title || \"\");\n        }\n        const similarRes = await fetch(`${API_BASE}/search/${query}`, {\n          signal: similarController.signal\n        });\n        const similarData = await similarRes.json();\n        if (!mountedRef.current) return;\n        if (similarData.error && similarData.error !== \"0\") {\n          throw new Error(\"Could not load similar books.\");\n        }\n        const filtered = Array.isArray(similarData.books) ? similarData.books.filter(b => b.isbn13 !== id).slice(0, 6) : [];\n        setSimilarBooks(filtered);\n        setLoadingSimilar(false);\n      } catch (err) {\n        if (detailsController.signal.aborted || similarController.signal.aborted) return;\n        console.error(\"Fetch error:\", err);\n        if (isDetailsPhase) {\n          setLoadingDetails(false);\n          setErrorDetails(\"Could not load book details.\");\n        } else {\n          setLoadingSimilar(false);\n          setErrorSimilar(\"Could not load similar books.\");\n        }\n      }\n    }\n    fetchDetailsAndSimilar();\n    return () => {\n      detailsController.abort();\n      similarController.abort();\n    };\n  }, [showDetails, id, title]);\n  const handleCardClick = e => {\n    if (e.target.tagName === \"BUTTON\" || e.target.closest(\"button\") || e.target.tagName === \"A\" || e.target.closest(\"a\")) {\n      return;\n    }\n    onSelect(id);\n  };\n  const handleViewDetails = e => {\n    e.stopPropagation();\n    setShowDetails(true);\n  };\n  const handleDismiss = () => {\n    setShowDetails(false);\n    setBookDetails(null);\n    setSimilarBooks([]);\n    setErrorDetails(\"\");\n    setErrorSimilar(\"\");\n  };\n  if (showDetails) {\n    const detailUrl = (bookDetails === null || bookDetails === void 0 ? void 0 : bookDetails.url) || url;\n    const detailImage = (bookDetails === null || bookDetails === void 0 ? void 0 : bookDetails.image) || image;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"book-details-view\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"dismiss-btn\",\n        onClick: handleDismiss,\n        children: \"\\u2190 Back to List\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"book-details-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"book-details-main\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"book-details-image-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: detailImage,\n              alt: (bookDetails === null || bookDetails === void 0 ? void 0 : bookDetails.title) || title || \"Book cover\",\n              className: \"book-details-image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 15\n            }, this), detailUrl && /*#__PURE__*/_jsxDEV(\"a\", {\n              className: \"external-link\",\n              href: detailUrl,\n              target: \"_blank\",\n              rel: \"noopener noreferrer\",\n              children: \"View on itbook.store\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"book-details-info\",\n            children: loadingDetails ? /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Loading details...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 17\n            }, this) : errorDetails ? /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"error-text\",\n              children: errorDetails\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 17\n            }, this) : bookDetails ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"book-details-title\",\n                children: bookDetails.title || title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 19\n              }, this), bookDetails.subtitle && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"book-details-subtitle\",\n                children: bookDetails.subtitle\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"book-details-meta\",\n                children: [bookDetails.authors && /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Author(s):\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 177,\n                    columnNumber: 26\n                  }, this), \" \", bookDetails.authors]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 177,\n                  columnNumber: 23\n                }, this), bookDetails.publisher && /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Publisher:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 180,\n                    columnNumber: 26\n                  }, this), \" \", bookDetails.publisher]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 180,\n                  columnNumber: 23\n                }, this), bookDetails.year && /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Publication Year:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 183,\n                    columnNumber: 26\n                  }, this), \" \", bookDetails.year]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 183,\n                  columnNumber: 23\n                }, this), bookDetails.pages && /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Pages:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 186,\n                    columnNumber: 26\n                  }, this), \" \", bookDetails.pages]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 186,\n                  columnNumber: 23\n                }, this), bookDetails.language && /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Language:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 189,\n                    columnNumber: 26\n                  }, this), \" \", bookDetails.language]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 23\n                }, this), bookDetails.isbn13 && /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"ISBN-13:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 192,\n                    columnNumber: 26\n                  }, this), \" \", bookDetails.isbn13]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 23\n                }, this), bookDetails.isbn10 && /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"ISBN-10:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 195,\n                    columnNumber: 26\n                  }, this), \" \", bookDetails.isbn10]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 195,\n                  columnNumber: 23\n                }, this), bookDetails.price && /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Price:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 198,\n                    columnNumber: 26\n                  }, this), \" \", bookDetails.price]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 198,\n                  columnNumber: 23\n                }, this), bookDetails.rating && /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Rating:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 201,\n                    columnNumber: 26\n                  }, this), \" \", bookDetails.rating, \"/5\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 201,\n                  columnNumber: 23\n                }, this), bookDetails.desc && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"book-description\",\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Description:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 205,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: bookDetails.desc\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 206,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 204,\n                  columnNumber: 23\n                }, this), bookDetails.pdf && typeof bookDetails.pdf === \"object\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"book-pdfs\",\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Sample PDFs:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 211,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                    children: Object.entries(bookDetails.pdf).map(([label, link]) => /*#__PURE__*/_jsxDEV(\"li\", {\n                      children: /*#__PURE__*/_jsxDEV(\"a\", {\n                        href: link,\n                        target: \"_blank\",\n                        rel: \"noopener noreferrer\",\n                        children: label\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 215,\n                        columnNumber: 31\n                      }, this)\n                    }, label, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 214,\n                      columnNumber: 29\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 212,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"book-details-title\",\n                children: title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 19\n              }, this), price && /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Price:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 228,\n                  columnNumber: 32\n                }, this), \" \", price]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"similar-books-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Similar Books\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 13\n          }, this), loadingSimilar ? /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Loading similar books...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 15\n          }, this) : errorSimilar ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"error-text\",\n            children: errorSimilar\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 15\n          }, this) : similarBooks.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"similar-books-grid\",\n            children: similarBooks.map(book => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"similar-book-card\",\n              children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                href: `https://itbook.store/books/${book.isbn13}`,\n                target: \"_blank\",\n                rel: \"noopener noreferrer\",\n                title: \"Open on itbook.store\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: book.image,\n                  alt: book.title,\n                  className: \"similar-book-image\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 250,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"similar-book-title\",\n                children: book.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 21\n              }, this), book.price && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"similar-book-price\",\n                children: book.price\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 23\n              }, this)]\n            }, book.isbn13, true, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No similar books found.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `book-card ${selected ? \"selected\" : \"\"} ${isLoaned ? \"loaned\" : \"\"}`,\n    onClick: handleCardClick,\n    role: \"button\",\n    tabIndex: 0,\n    onKeyDown: e => (e.key === \"Enter\" || e.key === \" \") && onSelect(id),\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: image,\n      alt: title || \"Book cover\",\n      className: \"book-image\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"title\",\n      children: title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 7\n    }, this), price && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"price\",\n      children: price\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 17\n    }, this), isLoaned && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"loaned-badge\",\n      children: \"On Loan\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 20\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"view-details-btn\",\n      onClick: handleViewDetails,\n      children: \"View Details\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 273,\n    columnNumber: 5\n  }, this);\n}\n_s(Book, \"iFZ8L+IO2f3AeXFm22IxMP/DKMs=\");\n_c = Book;\nvar _c;\n$RefreshReg$(_c, \"Book\");","map":{"version":3,"names":["React","useState","useEffect","useRef","jsxDEV","_jsxDEV","Fragment","_Fragment","API_BASE","Book","id","title","price","image","url","selected","onSelect","isLoaned","_s","showDetails","setShowDetails","bookDetails","setBookDetails","similarBooks","setSimilarBooks","loadingDetails","setLoadingDetails","loadingSimilar","setLoadingSimilar","errorDetails","setErrorDetails","errorSimilar","setErrorSimilar","mountedRef","current","detailsController","AbortController","similarController","fetchDetailsAndSimilar","isDetailsPhase","_detailsData$authors","detailsRes","fetch","signal","detailsData","json","error","Error","query","authors","trim","firstAuthor","split","nameParts","lastName","length","encodeURIComponent","similarRes","similarData","filtered","Array","isArray","books","filter","b","isbn13","slice","err","aborted","console","abort","handleCardClick","e","target","tagName","closest","handleViewDetails","stopPropagation","handleDismiss","detailUrl","detailImage","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","href","rel","subtitle","publisher","year","pages","language","isbn10","rating","desc","pdf","Object","entries","map","label","link","book","role","tabIndex","onKeyDown","key","_c","$RefreshReg$"],"sources":["/Users/vikamonakova/Desktop/booklabweek10/bookcatalogweek10/src/components/Book.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport \"./Book.css\";\n\n// Direct API URL\nconst API_BASE = \"https://api.itbook.store/1.0\";\n\nexport default function Book({\n  id,           \n  title,\n  price,\n  image,\n  url,           \n  selected,\n  onSelect = () => {},\n  isLoaned,\n}) {\n  const [showDetails, setShowDetails] = useState(false);\n  const [bookDetails, setBookDetails] = useState(null);\n  const [similarBooks, setSimilarBooks] = useState([]);\n  const [loadingDetails, setLoadingDetails] = useState(false);\n  const [loadingSimilar, setLoadingSimilar] = useState(false);\n  const [errorDetails, setErrorDetails] = useState(\"\");\n  const [errorSimilar, setErrorSimilar] = useState(\"\");\n\n  const mountedRef = useRef(true);\n  useEffect(() => {\n    mountedRef.current = true;\n    return () => { mountedRef.current = false; };\n  }, []);\n\n  useEffect(() => {\n    if (!showDetails || !id) return;\n\n    const detailsController = new AbortController();\n    const similarController = new AbortController();\n\n    async function fetchDetailsAndSimilar() {\n      let isDetailsPhase = true;\n      try {\n        setErrorDetails(\"\");\n        setErrorSimilar(\"\");\n        setLoadingDetails(true);\n\n        // 1) Book details by ISBN-13\n        const detailsRes = await fetch(`${API_BASE}/books/${id}`, {\n          signal: detailsController.signal,\n        });\n        const detailsData = await detailsRes.json();\n\n        if (!mountedRef.current) return;\n\n        if (detailsData.error && detailsData.error !== \"0\") {\n          throw new Error(detailsData.error === \"1\" ? \"Book not found.\" : \"Unknown API error.\");\n        }\n\n        setBookDetails(detailsData);\n        setLoadingDetails(false);\n        isDetailsPhase = false;\n\n        // 2) Similar books by author's last name (fallback: by title)\n        setLoadingSimilar(true);\n        let query;\n        \n        if (detailsData.authors?.trim()) {\n          // Extract last name from authors field\n          // Handle multiple authors by taking the first one\n          const firstAuthor = detailsData.authors.split(',')[0].trim();\n          // Split by spaces and take the last word as the last name\n          const nameParts = firstAuthor.split(/\\s+/);\n          const lastName = nameParts.length > 0 ? nameParts[nameParts.length - 1] : firstAuthor;\n          query = encodeURIComponent(lastName);\n        } else {\n          query = encodeURIComponent(detailsData.title || title || \"\");\n        }\n\n        const similarRes = await fetch(`${API_BASE}/search/${query}`, {\n          signal: similarController.signal,\n        });\n        const similarData = await similarRes.json();\n\n        if (!mountedRef.current) return;\n\n        if (similarData.error && similarData.error !== \"0\") {\n          throw new Error(\"Could not load similar books.\");\n        }\n\n        const filtered = Array.isArray(similarData.books)\n          ? similarData.books.filter((b) => b.isbn13 !== id).slice(0, 6)\n          : [];\n\n        setSimilarBooks(filtered);\n        setLoadingSimilar(false);\n      } catch (err) {\n        if (detailsController.signal.aborted || similarController.signal.aborted) return;\n        console.error(\"Fetch error:\", err);\n        if (isDetailsPhase) {\n          setLoadingDetails(false);\n          setErrorDetails(\"Could not load book details.\");\n        } else {\n          setLoadingSimilar(false);\n          setErrorSimilar(\"Could not load similar books.\");\n        }\n      }\n    }\n\n    fetchDetailsAndSimilar();\n\n    return () => {\n      detailsController.abort();\n      similarController.abort();\n    };\n  }, [showDetails, id, title]);\n\n  const handleCardClick = (e) => {\n    if (\n      e.target.tagName === \"BUTTON\" ||\n      e.target.closest(\"button\") ||\n      e.target.tagName === \"A\" ||\n      e.target.closest(\"a\")\n    ) {\n      return;\n    }\n    onSelect(id);\n  };\n\n  const handleViewDetails = (e) => {\n    e.stopPropagation();\n    setShowDetails(true);\n  };\n\n  const handleDismiss = () => {\n    setShowDetails(false);\n    setBookDetails(null);\n    setSimilarBooks([]);\n    setErrorDetails(\"\");\n    setErrorSimilar(\"\");\n  };\n\n  if (showDetails) {\n    const detailUrl = bookDetails?.url || url;\n    const detailImage = bookDetails?.image || image;\n\n    return (\n      <div className=\"book-details-view\">\n        <button className=\"dismiss-btn\" onClick={handleDismiss}>\n          ‚Üê Back to List\n        </button>\n\n        <div className=\"book-details-content\">\n          <div className=\"book-details-main\">\n            <div className=\"book-details-image-container\">\n              <img\n                src={detailImage}\n                alt={bookDetails?.title || title || \"Book cover\"}\n                className=\"book-details-image\"\n              />\n              {detailUrl && (\n                <a className=\"external-link\" href={detailUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n                  View on itbook.store\n                </a>\n              )}\n            </div>\n\n            <div className=\"book-details-info\">\n              {loadingDetails ? (\n                <p>Loading details...</p>\n              ) : errorDetails ? (\n                <p className=\"error-text\">{errorDetails}</p>\n              ) : bookDetails ? (\n                <>\n                  <h2 className=\"book-details-title\">{bookDetails.title || title}</h2>\n                  {bookDetails.subtitle && (\n                    <p className=\"book-details-subtitle\">{bookDetails.subtitle}</p>\n                  )}\n                  <div className=\"book-details-meta\">\n                    {bookDetails.authors && (\n                      <p><strong>Author(s):</strong> {bookDetails.authors}</p>\n                    )}\n                    {bookDetails.publisher && (\n                      <p><strong>Publisher:</strong> {bookDetails.publisher}</p>\n                    )}\n                    {bookDetails.year && (\n                      <p><strong>Publication Year:</strong> {bookDetails.year}</p>\n                    )}\n                    {bookDetails.pages && (\n                      <p><strong>Pages:</strong> {bookDetails.pages}</p>\n                    )}\n                    {bookDetails.language && (\n                      <p><strong>Language:</strong> {bookDetails.language}</p>\n                    )}\n                    {bookDetails.isbn13 && (\n                      <p><strong>ISBN-13:</strong> {bookDetails.isbn13}</p>\n                    )}\n                    {bookDetails.isbn10 && (\n                      <p><strong>ISBN-10:</strong> {bookDetails.isbn10}</p>\n                    )}\n                    {bookDetails.price && (\n                      <p><strong>Price:</strong> {bookDetails.price}</p>\n                    )}\n                    {bookDetails.rating && (\n                      <p><strong>Rating:</strong> {bookDetails.rating}/5</p>\n                    )}\n                    {bookDetails.desc && (\n                      <div className=\"book-description\">\n                        <strong>Description:</strong>\n                        <p>{bookDetails.desc}</p>\n                      </div>\n                    )}\n                    {bookDetails.pdf && typeof bookDetails.pdf === \"object\" && (\n                      <div className=\"book-pdfs\">\n                        <strong>Sample PDFs:</strong>\n                        <ul>\n                          {Object.entries(bookDetails.pdf).map(([label, link]) => (\n                            <li key={label}>\n                              <a href={link} target=\"_blank\" rel=\"noopener noreferrer\">\n                                {label}\n                              </a>\n                            </li>\n                          ))}\n                        </ul>\n                      </div>\n                    )}\n                  </div>\n                </>\n              ) : (\n                <>\n                  <h2 className=\"book-details-title\">{title}</h2>\n                  {price && <p><strong>Price:</strong> {price}</p>}\n                </>\n              )}\n            </div>\n          </div>\n\n          <div className=\"similar-books-section\">\n            <h3>Similar Books</h3>\n            {loadingSimilar ? (\n              <p>Loading similar books...</p>\n            ) : errorSimilar ? (\n              <p className=\"error-text\">{errorSimilar}</p>\n            ) : similarBooks.length > 0 ? (\n              <div className=\"similar-books-grid\">\n                {similarBooks.map((book) => (\n                  <div key={book.isbn13} className=\"similar-book-card\">\n                    <a\n                      href={`https://itbook.store/books/${book.isbn13}`}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      title=\"Open on itbook.store\"\n                    >\n                      <img\n                        src={book.image}\n                        alt={book.title}\n                        className=\"similar-book-image\"\n                      />\n                    </a>\n                    <p className=\"similar-book-title\">{book.title}</p>\n                    {book.price && (\n                      <p className=\"similar-book-price\">{book.price}</p>\n                    )}\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <p>No similar books found.</p>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={`book-card ${selected ? \"selected\" : \"\"} ${isLoaned ? \"loaned\" : \"\"}`}\n      onClick={handleCardClick}\n      role=\"button\"\n      tabIndex={0}\n      onKeyDown={(e) => (e.key === \"Enter\" || e.key === \" \") && onSelect(id)}\n    >\n      <img src={image} alt={title || \"Book cover\"} className=\"book-image\" />\n      <p className=\"title\">{title}</p>\n      {price && <p className=\"price\">{price}</p>}\n      {isLoaned && <p className=\"loaned-badge\">On Loan</p>}\n      <button className=\"view-details-btn\" onClick={handleViewDetails}>\n        View Details\n      </button>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
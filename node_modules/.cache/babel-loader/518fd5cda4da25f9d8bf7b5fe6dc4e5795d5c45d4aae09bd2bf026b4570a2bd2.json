{"ast":null,"code":"var _jsxFileName = \"/Users/vikamonakova/Desktop/booklabweek10/bookcatalogweek10/src/components/Book.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport \"./Book.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_BASE = \"https://api.itbook.store/1.0\";\nexport default function Book({\n  id,\n  // isbn13\n  title,\n  price,\n  image,\n  url,\n  // optional fallback (we'll prefer API detail url)\n  selected,\n  onSelect = () => {},\n  isLoaned\n}) {\n  _s();\n  const [showDetails, setShowDetails] = useState(false);\n  const [bookDetails, setBookDetails] = useState(null);\n  const [similarBooks, setSimilarBooks] = useState([]);\n  const [loadingDetails, setLoadingDetails] = useState(false);\n  const [loadingSimilar, setLoadingSimilar] = useState(false);\n  const [errorDetails, setErrorDetails] = useState(\"\");\n  const [errorSimilar, setErrorSimilar] = useState(\"\");\n\n  // track mounted state to avoid setState on unmounted\n  const mountedRef = useRef(true);\n  useEffect(() => {\n    mountedRef.current = true;\n    return () => {\n      mountedRef.current = false;\n    };\n  }, []);\n  useEffect(() => {\n    if (!showDetails || !id) return;\n    const detailsController = new AbortController();\n    const similarController = new AbortController();\n    async function fetchDetailsAndSimilar() {\n      try {\n        var _detailsData$authors;\n        setErrorDetails(\"\");\n        setErrorSimilar(\"\");\n        setLoadingDetails(true);\n\n        // 1) Book details by ISBN-13\n        const detailsRes = await fetch(`${API_BASE}/books/${id}`, {\n          signal: detailsController.signal\n        });\n        const detailsData = await detailsRes.json();\n        if (!mountedRef.current) return;\n        if (detailsData.error && detailsData.error !== \"0\") {\n          throw new Error(detailsData.error === \"1\" ? \"Book not found.\" : \"Unknown API error.\");\n        }\n        setBookDetails(detailsData);\n        setLoadingDetails(false);\n\n        // 2) Similar books by author (fallback: by title)\n        setLoadingSimilar(true);\n        const query = (_detailsData$authors = detailsData.authors) !== null && _detailsData$authors !== void 0 && _detailsData$authors.trim() ? encodeURIComponent(detailsData.authors.trim()) : encodeURIComponent(detailsData.title || title || \"\");\n        const similarRes = await fetch(`${API_BASE}/search/${query}`, {\n          signal: similarController.signal\n        });\n        const similarData = await similarRes.json();\n        if (!mountedRef.current) return;\n        if (similarData.error && similarData.error !== \"0\") {\n          throw new Error(\"Could not load similar books.\");\n        }\n        const filtered = Array.isArray(similarData.books) ? similarData.books.filter(b => b.isbn13 !== id).slice(0, 6) : [];\n        setSimilarBooks(filtered);\n        setLoadingSimilar(false);\n      } catch (err) {\n        if (detailsController.signal.aborted || similarController.signal.aborted) return;\n        console.error(\"Fetch error:\", err);\n        if (loadingDetails) {\n          setLoadingDetails(false);\n          setErrorDetails(\"Could not load book details.\");\n        } else {\n          setLoadingSimilar(false);\n          setErrorSimilar(\"Could not load similar books.\");\n        }\n      }\n    }\n    fetchDetailsAndSimilar();\n\n    // Cleanup on unmount/close\n    return () => {\n      detailsController.abort();\n      similarController.abort();\n    };\n  }, [showDetails, id, title]);\n  const handleCardClick = e => {\n    // Don't trigger selection if clicking a button or link\n    if (e.target.tagName === \"BUTTON\" || e.target.closest(\"button\") || e.target.tagName === \"A\" || e.target.closest(\"a\")) {\n      return;\n    }\n    onSelect(id);\n  };\n  const handleViewDetails = e => {\n    e.stopPropagation();\n    setShowDetails(true);\n  };\n  const handleDismiss = () => {\n    setShowDetails(false);\n    setBookDetails(null);\n    setSimilarBooks([]);\n    setErrorDetails(\"\");\n    setErrorSimilar(\"\");\n  };\n  if (showDetails) {\n    const detailUrl = (bookDetails === null || bookDetails === void 0 ? void 0 : bookDetails.url) || url;\n    const detailImage = (bookDetails === null || bookDetails === void 0 ? void 0 : bookDetails.image) || image;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"book-details-view\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"dismiss-btn\",\n        onClick: handleDismiss,\n        children: \"\\u2190 Back to List\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"book-details-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"book-details-main\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"book-details-image-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: detailImage,\n              alt: (bookDetails === null || bookDetails === void 0 ? void 0 : bookDetails.title) || title || \"Book cover\",\n              className: \"book-details-image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 15\n            }, this), detailUrl && /*#__PURE__*/_jsxDEV(\"a\", {\n              className: \"external-link\",\n              href: detailUrl,\n              target: \"_blank\",\n              rel: \"noopener noreferrer\",\n              children: \"View on itbook.store\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"book-details-info\",\n            children: loadingDetails ? /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Loading details...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 17\n            }, this) : errorDetails ? /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"error-text\",\n              children: errorDetails\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 17\n            }, this) : bookDetails ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"book-details-title\",\n                children: bookDetails.title || title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 19\n              }, this), bookDetails.subtitle && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"book-details-subtitle\",\n                children: bookDetails.subtitle\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"book-details-meta\",\n                children: [bookDetails.authors && /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Author(s):\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 168,\n                    columnNumber: 26\n                  }, this), \" \", bookDetails.authors]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 168,\n                  columnNumber: 23\n                }, this), bookDetails.publisher && /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Publisher:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 171,\n                    columnNumber: 26\n                  }, this), \" \", bookDetails.publisher]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 171,\n                  columnNumber: 23\n                }, this), bookDetails.year && /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Publication Year:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 174,\n                    columnNumber: 26\n                  }, this), \" \", bookDetails.year]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 23\n                }, this), bookDetails.pages && /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Pages:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 177,\n                    columnNumber: 26\n                  }, this), \" \", bookDetails.pages]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 177,\n                  columnNumber: 23\n                }, this), bookDetails.language && /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Language:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 180,\n                    columnNumber: 26\n                  }, this), \" \", bookDetails.language]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 180,\n                  columnNumber: 23\n                }, this), bookDetails.isbn13 && /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"ISBN-13:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 183,\n                    columnNumber: 26\n                  }, this), \" \", bookDetails.isbn13]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 183,\n                  columnNumber: 23\n                }, this), bookDetails.isbn10 && /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"ISBN-10:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 186,\n                    columnNumber: 26\n                  }, this), \" \", bookDetails.isbn10]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 186,\n                  columnNumber: 23\n                }, this), bookDetails.price && /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Price:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 189,\n                    columnNumber: 26\n                  }, this), \" \", bookDetails.price]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 23\n                }, this), bookDetails.rating && /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Rating:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 192,\n                    columnNumber: 26\n                  }, this), \" \", bookDetails.rating, \"/5\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 23\n                }, this), bookDetails.desc && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"book-description\",\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Description:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 196,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: bookDetails.desc\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 197,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 195,\n                  columnNumber: 23\n                }, this), bookDetails.pdf && typeof bookDetails.pdf === \"object\" && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"book-pdfs\",\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Sample PDFs:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 202,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                    children: Object.entries(bookDetails.pdf).map(([label, link]) => /*#__PURE__*/_jsxDEV(\"li\", {\n                      children: /*#__PURE__*/_jsxDEV(\"a\", {\n                        href: link,\n                        target: \"_blank\",\n                        rel: \"noopener noreferrer\",\n                        children: label\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 206,\n                        columnNumber: 31\n                      }, this)\n                    }, label, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 205,\n                      columnNumber: 29\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 203,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 201,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"book-details-title\",\n                children: title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 19\n              }, this), price && /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Price:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 32\n                }, this), \" \", price]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 219,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"similar-books-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Similar Books\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 13\n          }, this), loadingSimilar ? /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Loading similar books...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 15\n          }, this) : errorSimilar ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"error-text\",\n            children: errorSimilar\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 15\n          }, this) : similarBooks.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"similar-books-grid\",\n            children: similarBooks.map(book => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"similar-book-card\",\n              children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                href: `${API_BASE.replace(\"/1.0\", \"\")}/books/${book.isbn13}`,\n                target: \"_blank\",\n                rel: \"noopener noreferrer\",\n                title: \"Open on itbook.store\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: book.image,\n                  alt: book.title,\n                  className: \"similar-book-image\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 241,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"similar-book-title\",\n                children: book.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 21\n              }, this), book.price && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"similar-book-price\",\n                children: book.price\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 249,\n                columnNumber: 23\n              }, this)]\n            }, book.isbn13, true, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No similar books found.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Card view (collapsed)\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `book-card ${selected ? \"selected\" : \"\"} ${isLoaned ? \"loaned\" : \"\"}`,\n    onClick: handleCardClick,\n    role: \"button\",\n    tabIndex: 0,\n    onKeyDown: e => (e.key === \"Enter\" || e.key === \" \") && onSelect(id),\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: image,\n      alt: title || \"Book cover\",\n      className: \"book-image\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"title\",\n      children: title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 7\n    }, this), price && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"price\",\n      children: price\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 17\n    }, this), isLoaned && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"loaned-badge\",\n      children: \"On Loan\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 20\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"view-details-btn\",\n      onClick: handleViewDetails,\n      children: \"View Details\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 265,\n    columnNumber: 5\n  }, this);\n}\n_s(Book, \"iFZ8L+IO2f3AeXFm22IxMP/DKMs=\");\n_c = Book;\nvar _c;\n$RefreshReg$(_c, \"Book\");","map":{"version":3,"names":["React","useState","useEffect","useRef","jsxDEV","_jsxDEV","Fragment","_Fragment","API_BASE","Book","id","title","price","image","url","selected","onSelect","isLoaned","_s","showDetails","setShowDetails","bookDetails","setBookDetails","similarBooks","setSimilarBooks","loadingDetails","setLoadingDetails","loadingSimilar","setLoadingSimilar","errorDetails","setErrorDetails","errorSimilar","setErrorSimilar","mountedRef","current","detailsController","AbortController","similarController","fetchDetailsAndSimilar","_detailsData$authors","detailsRes","fetch","signal","detailsData","json","error","Error","query","authors","trim","encodeURIComponent","similarRes","similarData","filtered","Array","isArray","books","filter","b","isbn13","slice","err","aborted","console","abort","handleCardClick","e","target","tagName","closest","handleViewDetails","stopPropagation","handleDismiss","detailUrl","detailImage","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","href","rel","subtitle","publisher","year","pages","language","isbn10","rating","desc","pdf","Object","entries","map","label","link","length","book","replace","role","tabIndex","onKeyDown","key","_c","$RefreshReg$"],"sources":["/Users/vikamonakova/Desktop/booklabweek10/bookcatalogweek10/src/components/Book.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport \"./Book.css\";\n\nconst API_BASE = \"https://api.itbook.store/1.0\";\n\nexport default function Book({\n  id,            // isbn13\n  title,\n  price,\n  image,\n  url,           // optional fallback (we'll prefer API detail url)\n  selected,\n  onSelect = () => {},\n  isLoaned,\n}) {\n  const [showDetails, setShowDetails] = useState(false);\n  const [bookDetails, setBookDetails] = useState(null);\n  const [similarBooks, setSimilarBooks] = useState([]);\n  const [loadingDetails, setLoadingDetails] = useState(false);\n  const [loadingSimilar, setLoadingSimilar] = useState(false);\n  const [errorDetails, setErrorDetails] = useState(\"\");\n  const [errorSimilar, setErrorSimilar] = useState(\"\");\n\n  // track mounted state to avoid setState on unmounted\n  const mountedRef = useRef(true);\n  useEffect(() => {\n    mountedRef.current = true;\n    return () => { mountedRef.current = false; };\n  }, []);\n\n  useEffect(() => {\n    if (!showDetails || !id) return;\n\n    const detailsController = new AbortController();\n    const similarController = new AbortController();\n\n    async function fetchDetailsAndSimilar() {\n      try {\n        setErrorDetails(\"\");\n        setErrorSimilar(\"\");\n        setLoadingDetails(true);\n\n        // 1) Book details by ISBN-13\n        const detailsRes = await fetch(`${API_BASE}/books/${id}`, {\n          signal: detailsController.signal,\n        });\n        const detailsData = await detailsRes.json();\n\n        if (!mountedRef.current) return;\n\n        if (detailsData.error && detailsData.error !== \"0\") {\n          throw new Error(detailsData.error === \"1\" ? \"Book not found.\" : \"Unknown API error.\");\n        }\n\n        setBookDetails(detailsData);\n        setLoadingDetails(false);\n\n        // 2) Similar books by author (fallback: by title)\n        setLoadingSimilar(true);\n        const query =\n          detailsData.authors?.trim()\n            ? encodeURIComponent(detailsData.authors.trim())\n            : encodeURIComponent(detailsData.title || title || \"\");\n\n        const similarRes = await fetch(`${API_BASE}/search/${query}`, {\n          signal: similarController.signal,\n        });\n        const similarData = await similarRes.json();\n\n        if (!mountedRef.current) return;\n\n        if (similarData.error && similarData.error !== \"0\") {\n          throw new Error(\"Could not load similar books.\");\n        }\n\n        const filtered = Array.isArray(similarData.books)\n          ? similarData.books.filter((b) => b.isbn13 !== id).slice(0, 6)\n          : [];\n\n        setSimilarBooks(filtered);\n        setLoadingSimilar(false);\n      } catch (err) {\n        if (detailsController.signal.aborted || similarController.signal.aborted) return;\n        console.error(\"Fetch error:\", err);\n        if (loadingDetails) {\n          setLoadingDetails(false);\n          setErrorDetails(\"Could not load book details.\");\n        } else {\n          setLoadingSimilar(false);\n          setErrorSimilar(\"Could not load similar books.\");\n        }\n      }\n    }\n\n    fetchDetailsAndSimilar();\n\n    // Cleanup on unmount/close\n    return () => {\n      detailsController.abort();\n      similarController.abort();\n    };\n  }, [showDetails, id, title]);\n\n  const handleCardClick = (e) => {\n    // Don't trigger selection if clicking a button or link\n    if (\n      e.target.tagName === \"BUTTON\" ||\n      e.target.closest(\"button\") ||\n      e.target.tagName === \"A\" ||\n      e.target.closest(\"a\")\n    ) {\n      return;\n    }\n    onSelect(id);\n  };\n\n  const handleViewDetails = (e) => {\n    e.stopPropagation();\n    setShowDetails(true);\n  };\n\n  const handleDismiss = () => {\n    setShowDetails(false);\n    setBookDetails(null);\n    setSimilarBooks([]);\n    setErrorDetails(\"\");\n    setErrorSimilar(\"\");\n  };\n\n  if (showDetails) {\n    const detailUrl = bookDetails?.url || url;\n    const detailImage = bookDetails?.image || image;\n\n    return (\n      <div className=\"book-details-view\">\n        <button className=\"dismiss-btn\" onClick={handleDismiss}>\n          ‚Üê Back to List\n        </button>\n\n        <div className=\"book-details-content\">\n          <div className=\"book-details-main\">\n            <div className=\"book-details-image-container\">\n              <img\n                src={detailImage}\n                alt={bookDetails?.title || title || \"Book cover\"}\n                className=\"book-details-image\"\n              />\n              {detailUrl && (\n                <a className=\"external-link\" href={detailUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n                  View on itbook.store\n                </a>\n              )}\n            </div>\n\n            <div className=\"book-details-info\">\n              {loadingDetails ? (\n                <p>Loading details...</p>\n              ) : errorDetails ? (\n                <p className=\"error-text\">{errorDetails}</p>\n              ) : bookDetails ? (\n                <>\n                  <h2 className=\"book-details-title\">{bookDetails.title || title}</h2>\n                  {bookDetails.subtitle && (\n                    <p className=\"book-details-subtitle\">{bookDetails.subtitle}</p>\n                  )}\n                  <div className=\"book-details-meta\">\n                    {bookDetails.authors && (\n                      <p><strong>Author(s):</strong> {bookDetails.authors}</p>\n                    )}\n                    {bookDetails.publisher && (\n                      <p><strong>Publisher:</strong> {bookDetails.publisher}</p>\n                    )}\n                    {bookDetails.year && (\n                      <p><strong>Publication Year:</strong> {bookDetails.year}</p>\n                    )}\n                    {bookDetails.pages && (\n                      <p><strong>Pages:</strong> {bookDetails.pages}</p>\n                    )}\n                    {bookDetails.language && (\n                      <p><strong>Language:</strong> {bookDetails.language}</p>\n                    )}\n                    {bookDetails.isbn13 && (\n                      <p><strong>ISBN-13:</strong> {bookDetails.isbn13}</p>\n                    )}\n                    {bookDetails.isbn10 && (\n                      <p><strong>ISBN-10:</strong> {bookDetails.isbn10}</p>\n                    )}\n                    {bookDetails.price && (\n                      <p><strong>Price:</strong> {bookDetails.price}</p>\n                    )}\n                    {bookDetails.rating && (\n                      <p><strong>Rating:</strong> {bookDetails.rating}/5</p>\n                    )}\n                    {bookDetails.desc && (\n                      <div className=\"book-description\">\n                        <strong>Description:</strong>\n                        <p>{bookDetails.desc}</p>\n                      </div>\n                    )}\n                    {bookDetails.pdf && typeof bookDetails.pdf === \"object\" && (\n                      <div className=\"book-pdfs\">\n                        <strong>Sample PDFs:</strong>\n                        <ul>\n                          {Object.entries(bookDetails.pdf).map(([label, link]) => (\n                            <li key={label}>\n                              <a href={link} target=\"_blank\" rel=\"noopener noreferrer\">\n                                {label}\n                              </a>\n                            </li>\n                          ))}\n                        </ul>\n                      </div>\n                    )}\n                  </div>\n                </>\n              ) : (\n                <>\n                  <h2 className=\"book-details-title\">{title}</h2>\n                  {price && <p><strong>Price:</strong> {price}</p>}\n                </>\n              )}\n            </div>\n          </div>\n\n          <div className=\"similar-books-section\">\n            <h3>Similar Books</h3>\n            {loadingSimilar ? (\n              <p>Loading similar books...</p>\n            ) : errorSimilar ? (\n              <p className=\"error-text\">{errorSimilar}</p>\n            ) : similarBooks.length > 0 ? (\n              <div className=\"similar-books-grid\">\n                {similarBooks.map((book) => (\n                  <div key={book.isbn13} className=\"similar-book-card\">\n                    <a\n                      href={`${API_BASE.replace(\"/1.0\", \"\")}/books/${book.isbn13}`}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      title=\"Open on itbook.store\"\n                    >\n                      <img\n                        src={book.image}\n                        alt={book.title}\n                        className=\"similar-book-image\"\n                      />\n                    </a>\n                    <p className=\"similar-book-title\">{book.title}</p>\n                    {book.price && (\n                      <p className=\"similar-book-price\">{book.price}</p>\n                    )}\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <p>No similar books found.</p>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Card view (collapsed)\n  return (\n    <div\n      className={`book-card ${selected ? \"selected\" : \"\"} ${isLoaned ? \"loaned\" : \"\"}`}\n      onClick={handleCardClick}\n      role=\"button\"\n      tabIndex={0}\n      onKeyDown={(e) => (e.key === \"Enter\" || e.key === \" \") && onSelect(id)}\n    >\n      <img src={image} alt={title || \"Book cover\"} className=\"book-image\" />\n      <p className=\"title\">{title}</p>\n      {price && <p className=\"price\">{price}</p>}\n      {isLoaned && <p className=\"loaned-badge\">On Loan</p>}\n      <button className=\"view-details-btn\" onClick={handleViewDetails}>\n        View Details\n      </button>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}